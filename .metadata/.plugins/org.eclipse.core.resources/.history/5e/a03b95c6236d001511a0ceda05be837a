import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;



public class ConnectionListener implements Runnable {
	private Logger logger;
	private int port;
	public ConnectionListener(int _port) {
		port = _port;
		logger = new Logger();
	}

	public void run()		
	{
		logger.WriteLine("Привет из потока ConnectionListener!");
		try{
			while(true) {
				ServerSocket serverSocket = new ServerSocket(port);
				Socket fromClient = serverSocket.accept();	// в отдельынй поток	
				logger.WriteLine("New connection was detected");
				Sender sender1 = new Sender(fromClient);
				Thread thr1 = new Thread(sender1);
				
				thr1.start();
			}
		} catch(IOException e) {
			logger.WriteLine( "IOException " + e.getMessage() );
			
		} catch(Exception e) {
			
			logger.WriteLine( e.getMessage() );
		}
			
	}
	
	public void start()		
	{
		logger.WriteLine("start ConnectionListener!");
	}
}
